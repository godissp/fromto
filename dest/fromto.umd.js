!function(n,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t=e();for(var r in t)("object"==typeof exports?exports:n)[r]=t[r]}}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return n[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){(function(e){function r(){var n=this,e=Array.prototype.slice.call(arguments);n.trigger.apply(n,e),h(n.childChannels,function(n){n.broadcast.apply(n,e)})}function i(n){var e=this;m.each(n,function(n,t){e.allEvents[t]=n})}function o(n){var e=this;e.allEvents.hasOwnProperty(n)&&delete e.allEvents[n]}function a(n){this.triggerMiddleware.splice(1,0,n)}function c(){var n,e,t,r,i,o,a,c,l,u,s=this,f=s.triggerMiddleware.length-1,p=Array.prototype.slice.call(arguments),h=p[0],g=m.rest(p),y=!1,x=0,E=[];if(v(h)){u=[],t=h.length;for(var b=0;b<h.length;b++)!function(){var n=b,e=d(g);e.splice(0,0,h[b]);var f=s.trigger.apply(s,e);u.push(f.value),f.then(function(e){E[n]=e,++x,1===x&&i&&r?i(E):x===t&&c&&a&&c(E)},function(n){++x,1===x&&o&&r?o(n):x===t&&l&&a&&l(n)})}()}else{var w={next:function(){if(f!=-1)return s.triggerMiddleware[f--].apply(this,arguments)},event:h,args:g,allEvents:s.allEvents,ft:s,channelName:s.channelName,trigger:function(){s.trigger.apply(s,arguments)},resolve:function(e){delete w.resolve,delete w.reject,y&&n?n(e):setTimeout(function(){n?n(e):""},0)},reject:function(n){delete w.resolve,delete w.reject,y&&e?e(n):setTimeout(function(){e?e(u):""},0)}};u=w.next()}var j={event:h,returnValue:u,then:function(t,r){y=!0,n=t,e=r},race:function(n,e){r=!0,i=n,o=e},all:function(n,e){a=!0,c=n,l=e}};return j}function l(){var n=this;clearTimeout(n.timeout),n.asyncEvent.push(arguments),n.timeout=setTimeout(function(){u.apply(n)},0)}function u(){var n=this,e=[],t=g(n.asyncEvent,function(n,e){return n[0]});m.each(t,function(t,r){n.trigger.apply(n,t),e.push(t[0])}),n.asyncEvent=[]}function s(){var n=this;n.next();var e=n.event,t=n.args;if(n.allEvents[e])return n.allEvents[e].apply(n,t)}function f(n){var e=this;return e.childChannels.hasOwnProperty(n)||(e.childChannels[n]=p(n),e.childChannels[n].parentChannel=e),e.childChannels[n]}function p(n){return{channelName:n,allEvents:{},childChannels:{},asyncEvent:[],timeout:null,triggerMiddleware:x,bind:i,channel:f,unbind:o,addMiddleware:a,trigger:c,triggerAsyncOnce:l,broadcast:r}}var h=t(1),v=t(2),d=t(3),g=t(4),y=t(7),x=[s,y],m={};m.each=t(1),m.some=t(8),m.rest=t(9);var E=p("root");e.ft=E,n.exports=E}).call(e,function(){return this}())},function(n,e,t){var r=t(2);n.exports=function(n,e){if(r(n))for(var t=0;t<n.length;t++)e(n[t],t);else for(var t in n)e(n[t],t)}},function(n,e){n.exports=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)}},function(n,e){n.exports=function(n){for(var e=[],t=0;t<n.length;t++)e[t]=n[t];return e}},function(n,e,t){var r=t(1),i=t(5),o=t(6);n.exports=function(n,e){var t=[],a={};return r(n,function(n,r){var i=e(n,r);void 0!==a[i]&&(t=o(t,function(n,e){return n!=i})),a[i]=r,t.push(i)}),i(t,function(e,t){return n[a[e]]})}},function(n,e,t){var r=t(2);n.exports=function(n,e){var t;if(r(n)){t=[];for(var i=0;i<n.length;i++)t[i]=e(n[i],i)}else{t={};for(var i in n)t[i]=e(n[i],i)}return t}},function(n,e){n.exports=function(n,e){for(var t=[],r=0;r<n.length;r++)e(n[r],r)&&t.push(n[r]);return t}},function(n,e){var t=0,r=[];n.exports=function(){var n=this.event,e=this.args,i=r[t-1],o={name:n,args:e,depth:t++,parent:i,children:[]};i?i.children.push(o):"",r.push(o),this.eventTree=o;try{var a=this.next()}catch(c){window.console?console.log('Event "'+n+'" ',c.stack):""}finally{t--,r.pop()}return a}},function(n,e){n.exports=function(n,e){for(var t=0;t<n.length;t++)if(e(n[t],t))return!0}},function(n,e){n.exports=function(n){for(var e=[],t=1;t<n.length;t++)e[t-1]=n[t];return e}}])});